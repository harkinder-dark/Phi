{% extends 'base.html' %}
<!---->
{% block search %}

{% endblock %}
<!---->
{% block basebody %}
<div class="col-lg-7">

  <div class="card basic">
    {% for new in news %}
    <div class="card-body">
      <div class="card-title">
        <img src="{{ url_for('profile.upload', filename=new.author.img) }}" alt="" width="45em" class="rounded-circle">
        <span><a href="{{ url_for('profile.public', username=new.author.username) }}">{{ new.author.username }}</a> - {{ new.post.publish }}</span>
      </div>
      <div style="width: 100%; overflow-x:auto">{{ new.post.contains|safe }}</div>
      <br>
      <div class="container row">
          <a class="nav-link nav-icon col-2" href="#" data-bs-toggle="dropdown">
            <i class="bi bi-heart"></i>
            <span class="badge bg-success badge-number">3</span>
          </a>
          <a class="nav-link nav-icon col-2" href="#" data-bs-toggle="dropdown">
            <i class="bi bi-chat-left-text"></i>
            <span class="badge bg-success badge-number">{{ new.cmts|length }}</span>
          </a>
          <form action="/me/repost" method="post" class="nav-link nav-icon col-2" data-bs-toggle="dropdown">
            <input type="text" name="post_id" value="{{ new.post.id }}" hidden >
            <button style="text-decoration: none; border:0; background: none;" type="submit">
              <i class="bi bi-arrow-90deg-right"></i>
              <span class="badge bg-success badge-number">{{ new.repost|length }}</span>
            </button>
          </form>
      </div><br>
      {% if not new.hide.cmtDisable %}
      <form action="/post/comment" method="post">
        <input type="text" name="postRef" value="{{ new.post._id }}" hidden>
        <div class="form-floating mb-3">
          <textarea class="form-control" name="contains" placeholder="Leave a comment here" id="floatingTextarea" style="height: 100px;"></textarea>
          <label for="floatingTextarea">Comments</label>
        </div>
        <input type="submit" value="send">
      </form>
      <br>
      <!-- Default Accordion -->
      <div class="accordion" id="accordionExample">
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingOne">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
              All Comments
            </button>
          </h2>
          <div id="collapseOne" class="accordion-collapse collapse hidden" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              {% for cmts in new.cmts %}
                <div class="card container">
                  <span class="card-title">
                    <img src="{{ url_for('profile.upload', filename=cmt.auth.img) }}" alt="" width="35em" class="rounded-circle">
                    <span><a href="">{{ cmts.auth.username }}</a> - {{ cmts.cmt.publish }}</span>
                  </span>
                  <span>
                    {{ cmts.cmt.contains }}
                  </span><br>
                </div>
              {% endfor %}
            </div>
          </div>
        </div>
      </div><!-- End Default Accordion Example -->
      {% endif %}
      <br><hr>
  </div>
  {% endfor %}
  </div>
</div>
{% endblock %}
